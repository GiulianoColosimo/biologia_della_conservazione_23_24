{
  "hash": "848fe57df3c8c5f03686986dbd5df779",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Biologia della Conservazione\"\nsubtitle: \"Class 21 - Climate change-data retrieval\"\ndate: \"2024-06-03\"\nfooter:  \"[Biologia della conservazione 23/24 - Giuliano Colosimo, PhD](https://giulianocolosimo.github.io/biologia_della_conservazione_23_24/)\"\nlogo: ../../figures/Tor-Vergata_logo_cmyk.png\nformat: \n  revealjs:\n    width: 1600\n    height: 900 \n    theme: slides.scss\n    multiplex: true\n    transition: fade\n    slide-number: true\n    preview-links: true\n    chalkboard: \n      boardmarker-width: 5\neditor: visual\nfrom: markdown+emoji\nexecute:\n  freeze: auto\neditor_options: \n  chunk_output_type: console\nbibliography: /Users/giulianocolosimo/Library/CloudStorage/ProtonDrive-giuliano.colosimo@protonmail.com/manuscripts/literature/bibtex/comprehensive_database.bib\ncsl: /Users/giulianocolosimo/Library/CloudStorage/ProtonDrive-giuliano.colosimo@protonmail.com/manuscripts/literature/bibtex/apa_5th_edition.csl\ncitation_package: biblatex\ncitecolor: \"red\"\n---\n\n\n\n\n\n## Topics\n\n::: columns\n::: {.column width=\"50%\"}\n1.  [Introduction to conservation biology]{style=\"color: green;\"}\n2.  [Biodiversity]{style=\"color: green;\"}\n3.  [Biodiversity and extinctions]{style=\"color: green;\"}\n4.  [Populations]{style=\"color: green;\"}\n5.  [Basics of conservation genetics]{style=\"color: green;\"}\n6.  [Genetic drift]{style=\"color: green;\"}\n7.  [Effective population size]{style=\"color: green;\"}\n8.  [Inbreeding depression]{style=\"color: green;\"}\n9.  [Population structure]{style=\"color: green;\"}\n10. [Hybridization]{style=\"color: green;\"}\n11. [Applying genetic information to conservation]{style=\"color: green;\"}\n:::\n\n::: {.column width=\"50%\"}\n12. [Managing genetic diversity in captive populations]{style=\"color: green;\"}\n13. [Managing genetic diversity in the wild]{style=\"color: green;\"}\n14. [Population viability analysis]{style=\"color: green;\"}\n15. [Invasive species]{style=\"color: green;\"}\n16. [CITES and trade regulations of endangered species]{style=\"color: green;\"}\n17. [Conservation and climate change]{style=\"color: orange;\"}\n18. [Future climate impacts]{style=\"color: orange;\"}\n19. [Conservation economics]{style=\"color: blue;\"}\n20. [Conservation technology]{style=\"color: blue;\"}\n:::\n:::\n\n------------------------------------------------------------------------\n\n## Climate change quiz!\n\n. . .\n\n-   Most of the Earth's water is found in:\n\n    a.  The earth's interior\n    b.  The atmosphere\n    c.  Lakes and rivers\n    d.  The ocean\n    e.  The polar ice caps\n\n. . .\n\n::: callout-tip\n## d)\n\nMost of Earth's water ($96.5\\%$) is saline, or salty, ocean seawater. Most of the fresh water is tied up in glaciers and ice sheets, which means that only a relatively small portion is available to sustain human, plant and animal life.\n:::\n\n-   [This](https://climate.nasa.gov/explore/interactives/quizzes) is the link to the climate change quizzes!\n\n------------------------------------------------------------------------\n\n-   Which of these has a greater effect on global sea level?\n\n    a.  Melting sea ice\n    b.  Melting land ice\n    c.  a and b combined\n    d.  Extreme precipitation events\n    e.  None of the above\n\n. . .\n\n::: callout-tip\n## b)\n\nSea level rise is caused primarily by two factors related to global warming: the added water from melting land ice and the expansion of seawater as it warms. Melting sea ice does not contribute nearly as much to ocean water volume because floating ice displaces water in an amount equal to its volume. Some coastal regions and island nations have begun to experience the consequences of sea level rise. Rising seas not only affect dwellings and infrastructure, but fresh water is also affected as rising saltwater begins to contaminate it through \"saltwater intrusion.\"\n:::\n\n------------------------------------------------------------------------\n\n-   Measurements of Earth's gravitational field permit topographic, or surface, mapping of the ocean floor.\n\n    a.  True\n    b.  False\n\n. . .\n\n::: callout-tip\n## True\n\nUndersea mountain ranges like the the Mid-Atlantic Ridge, chains of islands and sea mounts like the strand from Hawai'i Island past Midway to the Aleutian Islands chain, and deep sea trenches like the Japan Trench can be identified in data collected by the GRACE (Gravity Recovery and Climate Experiment) spacecraft. The additional mass of rock that composes the undersea mountains and the lack of rock in trenches provide gravitational telltales that GRACE can detect.\n:::\n\n------------------------------------------------------------------------\n\n-   The only current that makes an uninterrupted circle around the entire Earth without hitting land is the:\n\n    a.  Gulf stream\n    b.  Japan current\n    c.  California current\n    d.  Antarctic Circumpolar Current\n    e.  Monsoons\n\n. . .\n\n::: callout-tip\n## d)\n\nOcean currents are driven by ocean winds and influenced by the \"Coriolis effect.\" Water flows along the current until it encounters land, where the Coriolis effect causes the current to rotate clockwise in the northern hemisphere and counterclockwise in the south. Most currents form \"gyres,\" or large systems of rotating ocean currents. The gyre's rotational patterns draw in debris from across the ocean, while wind patterns push the trash toward the center, trapping it there. In the Southern Ocean around Antarctica, there is no land, which allows the Antarctic Circumpolar Current to travel around the globe uninterrupted.\n:::\n\n------------------------------------------------------------------------\n\n-   Tides are caused by:\n\n    a.  The wind\n    b.  Earthquakes\n    c.  The moon's gravitational pool\n    d.  The gravitational pool of both the moon and the sun\n    e.  People swimming\n\n. . .\n\n::: callout-tip\n## d)\n\nBoth the sun and the moon influence tide rise and fall, which are caused by the gravitational attraction between the ocean and the moon as well as the ocean and the sun. \"Centrifugal force\" --- the same force that pulls you backward on the teacup ride at Disneyland -- is generated from Earth's spin and is another factor that influences Earth's tides.\n:::\n\n------------------------------------------------------------------------\n\n-   About how much of Earth's surface is covered by clouds at any given time?\n\n    a.  $15\\%$\n    b.  $30\\%$\n    c.  $60\\%$\n    d.  $90\\%$\n    e.  $95\\%$\n\n. . .\n\n::: callout-tip\n## c)\n\nCovering most of the Earth at any given moment, clouds have a huge---but insufficiently understood---impact on climate.\n:::\n\n------------------------------------------------------------------------\n\n-   What effects do various aerosols have on the climate?\n\n    a.  Reflect sunlight back in to space, cooling the planet\n    b.  Provide a platform for water droplets and ice crystals to form and develop in to cloud\n    c.  Increase the brightness of clouds making them reflect more sunlight in to space\n    d.  Absorb sunlight, heat the surrounding air and prevent cloud formation\n    e.  All of the above\n    f.  a, b, and c\n\n. . .\n\n::: callout-tip\n## e)\n\nThat's part of what makes aerosols so hard to pin down in climate models. Various kinds of aerosols have various kinds of effects, both direct and indirect. As a direct effect, aerosols scatter sunlight back into space. As an indirect effect, they can either help or hinder the development of clouds, which in turn can either cool or warm the planet.\n:::\n\n------------------------------------------------------------------------\n\n-   The brighter a cloud looks, the less pollution it contains.\n\n    a.  True\n    b.  False\n\n. . .\n\n::: callout-tip\n## False\n\nA given volume of pollution-rich cloud tends to have more numerous and smaller droplets than in more pristine clouds. The high number of small droplets provides more surfaces to reflect light, making the cloud appear brighter than a cloud consisting of fewer and larger droplets.\n:::\n\n------------------------------------------------------------------------\n\n-   Do clouds heat or cool Earth?\n\n    a.  Heat\n    b.  Cool\n    c.  Both heat and cool\n    d.  Neither heat nor cool\n\n. . .\n\n::: callout-tip\n## c)\n\nDifferent kinds of clouds at different altitudes play different roles in regulating Earth's temperature. Wispy clouds at high altitudes tend to trap infrared radiation emitted by the sun-warmed Earth, which prevents it from escaping into space and warms the atmosphere. On the other hand, thick, low-lying clouds tend to cool the planet by shading Earth's surface, reflecting sunlight back into space. Scientists are trying to determine how global warming will affect the balance we've been enjoying up to now.\n:::\n\n------------------------------------------------------------------------\n\n## Let's work with some data\n\n-   On-line data resources:\n\n    -   [Eurostat](https://ec.europa.eu/eurostat/web/main/data)\n    -   [NOAA](https://www.noaa.gov)\n    -   [NASA](https://data.nasa.gov/browse)\n    -   [Our World in Data (via GitHub)](https://github.com/owid/co2-data)\n    -   [Copernicus](https://cds.climate.copernicus.eu/cdsapp#!/search?type=dataset)\n    -   [Automated Surface Observing System (ASOS)](https://mesonet.agron.iastate.edu/ASOS/)\n\n-   Take your computer and open R.\n\n------------------------------------------------------------------------\n\n-   We will be downloading historical data from the ASOS data repository available at Iowa State.\n-   We will working on data from the Italian network of automated weather stations.\n-   First lets take a look at the website to see how we can use R to automate the process of downloading the data and eventually analyse them.\n\n[Automated Surface Observing System (ASOS)](https://mesonet.agron.iastate.edu/ASOS/)\n\n. . .\n\n### The packages we will be using\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Installing the appropriate packages\ninstall.packages(c(\"jsonlite\", \"RCurl\", \"lubridate\", \"dplyr\", \"ggplot2\"))\n```\n:::\n\n\n<br/>\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Loading them up in the working environment\nlibrary(jsonlite)\nlibrary(RCurl)\nlibrary(lubridate)\nlibrary(dplyr)\nlibrary(ggplot2)\n```\n:::\n\n\n------------------------------------------------------------------------\n\n### Input from the user\n\nNow that we know the web site, we can set up a script to automate the downloading of the data. This process is often trial and error, but eventually it could work.\n\n. . .\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# first, we need to specify the date boundaries of our dataset\ndate1 <- ISOdate(1990,1,1) #start date in year, month, day format\ndate2 <- ISOdate(2020,12,31) #end date in year, month, day format\n\n# second, we need to specify the data network parameter we want to download the data from\n# and the state we want to download the data from\nuser.network <- c(\"ASOS\")\nuser.state <- c(\"IT\") #state\n```\n:::\n\n\n. . .\n\nWe can now start and retrieve the identifier of all the weather stations we are interested in.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnetwork <- paste(user.state, user.network, sep = \"__\")\nuri <- paste(\"https://mesonet.agron.iastate.edu/geojson/network/\", network, \".geojson\", sep=\"\")\nuri\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"https://mesonet.agron.iastate.edu/geojson/network/IT__ASOS.geojson\"\n```\n\n\n:::\n:::\n\n\n------------------------------------------------------------------------\n\nWe use the URL address we have prepared and try to retrieve the information we want.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# first we tell R that that string has to be treated as a URL\n# in this way R will be opening a connection to that specific URL \n# and we will be able to access the website and do our things\ndata <- url(uri)\ndata\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nA connection with                                                                                \ndescription \"https://mesonet.agron.iastate.edu/geojson/network/IT__ASOS.geojson\"\nclass       \"url-libcurl\"                                                       \nmode        \"r\"                                                                 \ntext        \"text\"                                                              \nopened      \"closed\"                                                            \ncan read    \"yes\"                                                               \ncan write   \"no\"                                                                \n```\n\n\n:::\n:::\n\n\n------------------------------------------------------------------------\n\nNow we can use that connection to read the information.\n\n\n::: {.cell}\n\n```{.r .cell-code}\njdict <- fromJSON(data)\njdict\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$type\n[1] \"FeatureCollection\"\n\n$features\n       type   id properties.elevation    properties.sname\n1   Feature LIMG              49.0000             Albenga\n2   Feature LIEA              23.0000             Alghero\n3   Feature LIBA              60.0000            Amendola\n4   Feature LIPY              10.0000              Ancona\n5   Feature LIMW             545.0000               Aosta\n6   Feature LIQB             246.8307              Arezzo\n7   Feature LIPA             126.0000              Aviano\n8   Feature LIYW             126.0000       AVIANO (USAF)\n9   Feature LIBD              44.0000                Bari\n10  Feature LIME             237.0000             Bergamo\n11  Feature LIPE              42.0000             Bologna\n12  Feature LIPB             241.0000             Bolzano\n13  Feature LIPO             109.0000             Brescia\n14  Feature LIBR              10.0000            Brindisi\n15  Feature LIEE               4.0000            Cagliari\n16  Feature LIMN             169.0000              Cameri\n17  Feature LIEB             156.0000     CAPE BELLAVISTA\n18  Feature LIEC             118.0000      CAPE CARBONARA\n19  Feature LIMU             221.0000           CAPE MELE\n20  Feature LIQC             269.0000        CAPRI ISLAND\n21  Feature LICC              17.0000             Catania\n22  Feature LIPC              10.0000              Cervia\n23  Feature LIVC            2173.0000     CIMONE MOUNTAIN\n24  Feature LIMT            1040.0000           CISA PASS\n25  Feature LIQJ               4.0000       CIVITAVECCHIA\n26  Feature LICB             292.5910              Comiso\n27  Feature LICO              51.0000       COZZO SPADARO\n28  Feature LIBC             161.0000             Crotone\n29  Feature LIMZ             380.0000               Cuneo\n30  Feature LIED              28.0000         Decimomannu\n31  Feature LIVD            1226.0000            DOBBIACO\n32  Feature LICE             965.0000                ENNA\n33  Feature LIPF              10.0000       FERRARA (AUT)\n34  Feature LIRQ              38.0000            Florence\n35  Feature LIBF              80.0000              Foggia\n36  Feature LIPK              32.0000               Forli\n37  Feature LIVF             574.0000            FRONTONE\n38  Feature LIRH             181.0000  FROSINONE (IT-AFB)\n39  Feature LICL              33.0000                GELA\n40  Feature LIMJ               3.0000               Genoa\n41  Feature LIPL              92.0000               Ghedi\n42  Feature LIBV             350.0000     Gioia Del Colle\n43  Feature LIMV             475.0000          GIOVI PASS\n44  Feature LIRM              10.0000          Grazzanise\n45  Feature LIRS               7.0000            Grosseto\n46  Feature LIBG              69.0000          Grottaglie\n47  Feature LIRG              89.0000            Guidonia\n48  Feature LICA              15.0000             Lamezia\n49  Feature LICD              20.0000           Lampedusa\n50  Feature LIRL              26.0000              Latina\n51  Feature LIBU             896.0000           LATRONICO\n52  Feature LIBN              61.0000               Lecce\n53  Feature LIMY            1742.0000  MALANOTTE MOUNTAIN\n54  Feature LIRJ             397.0000     Marina Di Campo\n55  Feature LIBH              12.0000    MARINA DI GINOSA\n56  Feature LICF              51.0000             MESSINA\n57  Feature LIML             103.0000               Milan\n58  Feature LIMC             211.0000              Milano\n59  Feature LIRX             297.0000      MONTE CALAMITA\n60  Feature LIBE             834.1110     Monte S. Angelo\n61  Feature LIQO             632.0000    MOUNT ARGENTARIO\n62  Feature LIRN              72.0000              Naples\n63  Feature LIEO              13.0000               Olbia\n64  Feature LIPU              14.0000              Padova\n65  Feature LIVP            2129.0000  PAGANELLA MOUNTAIN\n66  Feature LICJ              34.0000             Palermo\n67  Feature LICG             191.0000         Pantelleria\n68  Feature LIMP              50.0000               Parma\n69  Feature LIRZ             205.0000             Perugia\n70  Feature LIBP              11.0000             Pescara\n71  Feature LIMS             138.0000            Piacenza\n72  Feature LIMH            3488.0000 PIAN ROSA (MTN TOP)\n73  Feature LIRP               2.0000                Pisa\n74  Feature LIVM               6.0000 POINT MARINA/RAVENN\n75  Feature LIRE              12.0000     Pratica Di Mare\n76  Feature LICR              21.0000     Reggio Calabria\n77  Feature LIVE            1800.0000          RESIA PASS\n78  Feature LIQN             389.0000               RIETI\n79  Feature LIPR              13.0000              Rimini\n80  Feature LIPI              53.0000             Rivolto\n81  Feature LIVR            2006.0000          ROLLE PASS\n82  Feature LIRF               3.0000                Rome\n83  Feature LIRA             101.0000                Rome\n84  Feature LIRU              24.0000                Rome\n85  Feature LIPQ              12.0000 Ronchi De Legionari\n86  Feature LIRI              40.0000             Salerno\n87  Feature LIBY             112.0000 SANTA MARIA DI LEUC\n88  Feature LIQW              10.0000        Sarzana (SP)\n89  Feature LIBQ            1720.0000      SCURO MOUNTAIN\n90  Feature LICZ              22.0000           Sigonella\n91  Feature EQYS              23.0000           Sigonella\n92  Feature LIVO             778.0000            TARVISIO\n93  Feature LIRK            1875.0000 TERMINILLO MOUNTAIN\n94  Feature LIBT              44.0000             TERMOLI\n95  Feature LIMF             287.0000              Torino\n96  Feature LIMK             710.0000   TORINO/BRIC CROCE\n97  Feature LICT               7.0000             Trapani\n98  Feature LIRT            1093.0000             TREVICO\n99  Feature LIPH              23.0000             Treviso\n100 Feature LIPS              41.0000             Treviso\n101 Feature LIVT              20.0000             TRIESTE\n102 Feature LIMA             287.0000               Turin\n103 Feature LIRY              31.0000             Unknown\n104 Feature LICU             251.0000       USTICA ISLAND\n105 Feature LIPZ               6.0000              Venice\n106 Feature LIRB             258.0539      Vigna Di Valle\n107 Feature LIPX              68.0000         Villafranca\n108 Feature LIRV             300.0000             Viterbo\n    properties.time_domain properties.archive_begin properties.archive_end\n1               (1973-Now)               1973-01-01                   <NA>\n2               (1957-Now)               1957-06-30                   <NA>\n3               (1944-Now)               1944-01-31                   <NA>\n4               (1945-Now)               1945-04-14                   <NA>\n5               (1984-Now)               1984-06-30                   <NA>\n6              (1978-2016)               1978-09-14             2016-03-06\n7               (1966-Now)               1966-06-30                   <NA>\n8              (1993-2015)               1993-06-30             2015-10-20\n9               (1943-Now)               1943-12-07                   <NA>\n10              (1966-Now)               1966-09-08                   <NA>\n11              (1964-Now)               1964-08-10                   <NA>\n12              (1965-Now)               1965-01-28                   <NA>\n13              (2002-Now)               2002-02-21                   <NA>\n14              (1943-Now)               1943-11-29                   <NA>\n15              (1943-Now)               1943-11-01                   <NA>\n16              (1966-Now)               1966-09-22                   <NA>\n17              (1966-Now)               1966-01-04                   <NA>\n18              (1972-Now)               1972-12-31                   <NA>\n19              (1965-Now)               1965-04-30                   <NA>\n20              (1972-Now)               1972-12-31                   <NA>\n21              (1943-Now)               1943-10-28                   <NA>\n22              (1972-Now)               1972-12-31                   <NA>\n23              (1965-Now)               1965-01-31                   <NA>\n24             (1972-2019)               1972-12-31             2019-09-23\n25             (2005-2021)               2005-07-27             2021-08-26\n26              (1984-Now)               1984-03-23                   <NA>\n27             (1965-2016)               1965-12-31             2016-03-13\n28              (1957-Now)               1957-06-30                   <NA>\n29              (2003-Now)               2003-01-01                   <NA>\n30              (1966-Now)               1966-09-22                   <NA>\n31              (1973-Now)               1973-01-01                   <NA>\n32             (1972-2014)               1972-12-31             2014-01-20\n33              (1973-Now)               1973-01-01                   <NA>\n34              (1931-Now)               1931-01-02                   <NA>\n35              (1943-Now)               1943-09-30                   <NA>\n36              (1972-Now)               1972-12-31                   <NA>\n37              (1973-Now)               1973-01-01                   <NA>\n38              (1972-Now)               1972-12-31                   <NA>\n39              (1943-Now)               1943-09-02                   <NA>\n40              (1928-Now)               1928-01-01                   <NA>\n41              (1966-Now)               1966-09-04                   <NA>\n42              (1944-Now)               1944-02-29                   <NA>\n43              (1972-Now)               1972-12-31                   <NA>\n44              (1944-Now)               1944-03-31                   <NA>\n45              (1944-Now)               1944-12-11                   <NA>\n46              (1943-Now)               1943-09-27                   <NA>\n47              (1966-Now)               1966-09-23                   <NA>\n48              (1977-Now)               1977-10-31                   <NA>\n49              (1966-Now)               1966-01-04                   <NA>\n50              (1944-Now)               1944-03-01                   <NA>\n51             (2005-2016)               2005-07-27             2016-02-12\n52              (1943-Now)               1943-12-31                   <NA>\n53              (1973-Now)               1973-06-07                   <NA>\n54             (2010-2012)               2010-12-31             2012-01-20\n55              (1967-Now)               1967-03-17                   <NA>\n56              (1931-Now)               1931-01-01                   <NA>\n57              (1931-Now)               1931-01-04                   <NA>\n58              (1965-Now)               1965-02-03                   <NA>\n59              (1972-Now)               1972-12-31                   <NA>\n60             (2003-2014)               2003-08-01             2014-04-27\n61              (1972-Now)               1972-12-31                   <NA>\n62              (1951-Now)               1951-09-30                   <NA>\n63              (1969-Now)               1969-11-17                   <NA>\n64              (1973-Now)               1973-01-01                   <NA>\n65              (1972-Now)               1972-12-31                   <NA>\n66              (1964-Now)               1964-08-10                   <NA>\n67              (1943-Now)               1943-06-20                   <NA>\n68              (2003-Now)               2003-01-01                   <NA>\n69              (1967-Now)               1967-11-06                   <NA>\n70              (1965-Now)               1965-01-31                   <NA>\n71              (1966-Now)               1966-09-14                   <NA>\n72              (1965-Now)               1965-01-28                   <NA>\n73              (1944-Now)               1944-11-24                   <NA>\n74              (1966-Now)               1966-01-04                   <NA>\n75              (1966-Now)               1966-09-23                   <NA>\n76              (1972-Now)               1972-12-31                   <NA>\n77              (1987-Now)               1987-03-25                   <NA>\n78              (1973-Now)               1973-12-13                   <NA>\n79              (1945-Now)               1945-04-07                   <NA>\n80              (1958-Now)               1958-04-14                   <NA>\n81              (1973-Now)               1973-01-01                   <NA>\n82              (1965-Now)               1965-06-30                   <NA>\n83              (1951-Now)               1951-09-30                   <NA>\n84              (1972-Now)               1972-12-31                   <NA>\n85              (1972-Now)               1972-12-31                   <NA>\n86              (1993-Now)               1993-01-29                   <NA>\n87              (1965-Now)               1965-01-31                   <NA>\n88              (1973-Now)               1973-11-08                   <NA>\n89              (2001-Now)               2001-07-21                   <NA>\n90              (1943-Now)               1943-08-10                   <NA>\n91             (2022-2022)               2022-04-12             2022-05-27\n92              (1965-Now)               1965-01-28                   <NA>\n93              (1965-Now)               1965-01-31                   <NA>\n94             (1972-2016)               1972-12-31             2016-03-16\n95              (1964-Now)               1964-08-10                   <NA>\n96              (1972-Now)               1972-12-31                   <NA>\n97              (1965-Now)               1965-01-31                   <NA>\n98              (1972-Now)               1972-12-31                   <NA>\n99              (1966-Now)               1966-09-01                   <NA>\n100             (1966-Now)               1966-09-04                   <NA>\n101             (1932-Now)               1932-10-20                   <NA>\n102             (2008-Now)               2008-04-25                   <NA>\n103             (2023-Now)               2023-07-16                   <NA>\n104            (1957-2021)               1957-06-30             2021-08-26\n105             (1961-Now)               1961-03-01                   <NA>\n106            (1973-2016)               1973-01-01             2016-03-03\n107             (1945-Now)               1945-05-17                   <NA>\n108             (1944-Now)               1944-06-30                   <NA>\n    properties.state properties.country properties.climate_site properties.wfo\n1               <NA>                 IT                      NA             NA\n2               <NA>                 IT                      NA             NA\n3               <NA>                 IT                      NA             NA\n4               <NA>                 IT                      NA             NA\n5               <NA>                 IT                      NA             NA\n6                                    IT                      NA             NA\n7               <NA>                 IT                      NA             NA\n8               <NA>                 IT                      NA             NA\n9               <NA>                 IT                      NA             NA\n10              <NA>                 IT                      NA             NA\n11              <NA>                 IT                      NA             NA\n12              <NA>                 IT                      NA             NA\n13              <NA>                 IT                      NA             NA\n14              <NA>                 IT                      NA             NA\n15              <NA>                 IT                      NA             NA\n16              <NA>                 IT                      NA             NA\n17              <NA>                 IT                      NA             NA\n18              <NA>                 IT                      NA             NA\n19              <NA>                 IT                      NA             NA\n20              <NA>                 IT                      NA             NA\n21              <NA>                 IT                      NA             NA\n22              <NA>                 IT                      NA             NA\n23              <NA>                 IT                      NA             NA\n24              <NA>                 IT                      NA             NA\n25              <NA>                 IT                      NA             NA\n26              <NA>                 IT                      NA             NA\n27              <NA>                 IT                      NA             NA\n28              <NA>                 IT                      NA             NA\n29              <NA>                 IT                      NA             NA\n30              <NA>                 IT                      NA             NA\n31              <NA>                 IT                      NA             NA\n32              <NA>                 IT                      NA             NA\n33              <NA>                 IT                      NA             NA\n34              <NA>                 IT                      NA             NA\n35              <NA>                 IT                      NA             NA\n36              <NA>                 IT                      NA             NA\n37              <NA>                 IT                      NA             NA\n38              <NA>                 IT                      NA             NA\n39              <NA>                 IT                      NA             NA\n40              <NA>                 IT                      NA             NA\n41              <NA>                 IT                      NA             NA\n42              <NA>                 IT                      NA             NA\n43              <NA>                 IT                      NA             NA\n44              <NA>                 IT                      NA             NA\n45              <NA>                 IT                      NA             NA\n46              <NA>                 IT                      NA             NA\n47              <NA>                 IT                      NA             NA\n48              <NA>                 IT                      NA             NA\n49              <NA>                 IT                      NA             NA\n50              <NA>                 IT                      NA             NA\n51              <NA>                 IT                      NA             NA\n52              <NA>                 IT                      NA             NA\n53              <NA>                 IT                      NA             NA\n54              <NA>                 IT                      NA             NA\n55              <NA>                 IT                      NA             NA\n56              <NA>                 IT                      NA             NA\n57              <NA>                 IT                      NA             NA\n58              <NA>                 IT                      NA             NA\n59              <NA>                 IT                      NA             NA\n60              <NA>                 IT                      NA             NA\n61              <NA>                 IT                      NA             NA\n62              <NA>                 IT                      NA             NA\n63              <NA>                 IT                      NA             NA\n64              <NA>                 IT                      NA             NA\n65              <NA>                 IT                      NA             NA\n66              <NA>                 IT                      NA             NA\n67              <NA>                 IT                      NA             NA\n68              <NA>                 IT                      NA             NA\n69              <NA>                 IT                      NA             NA\n70              <NA>                 IT                      NA             NA\n71              <NA>                 IT                      NA             NA\n72              <NA>                 IT                      NA             NA\n73              <NA>                 IT                      NA             NA\n74              <NA>                 IT                      NA             NA\n75              <NA>                 IT                      NA             NA\n76              <NA>                 IT                      NA             NA\n77              <NA>                 IT                      NA             NA\n78              <NA>                 IT                      NA             NA\n79              <NA>                 IT                      NA             NA\n80              <NA>                 IT                      NA             NA\n81              <NA>                 IT                      NA             NA\n82              <NA>                 IT                      NA             NA\n83              <NA>                 IT                      NA             NA\n84              <NA>                 IT                      NA             NA\n85              <NA>                 IT                      NA             NA\n86              <NA>                 IT                      NA             NA\n87              <NA>                 IT                      NA             NA\n88              <NA>                 IT                      NA             NA\n89              <NA>                 IT                      NA             NA\n90              <NA>                 IT                      NA             NA\n91                                   IT                      NA             NA\n92              <NA>                 IT                      NA             NA\n93              <NA>                 IT                      NA             NA\n94              <NA>                 IT                      NA             NA\n95              <NA>                 IT                      NA             NA\n96              <NA>                 IT                      NA             NA\n97              <NA>                 IT                      NA             NA\n98              <NA>                 IT                      NA             NA\n99              <NA>                 IT                      NA             NA\n100             <NA>                 IT                      NA             NA\n101             <NA>                 IT                      NA             NA\n102             <NA>                 IT                      NA             NA\n103                                  IT                      NA             NA\n104             <NA>                 IT                      NA             NA\n105             <NA>                 IT                      NA             NA\n106                                  IT                      NA             NA\n107             <NA>                 IT                      NA             NA\n108             <NA>                 IT                      NA             NA\n    properties.tzname properties.ncdc81 properties.ncei91 properties.ugc_county\n1         Europe/Rome                NA                NA                    NA\n2         Europe/Rome                NA                NA                    NA\n3         Europe/Rome                NA                NA                    NA\n4         Europe/Rome                NA                NA                    NA\n5         Europe/Rome                NA                NA                    NA\n6         Europe/Rome                NA                NA                    NA\n7         Europe/Rome                NA                NA                    NA\n8         Europe/Rome                NA                NA                    NA\n9         Europe/Rome                NA                NA                    NA\n10        Europe/Rome                NA                NA                    NA\n11        Europe/Rome                NA                NA                    NA\n12        Europe/Rome                NA                NA                    NA\n13        Europe/Rome                NA                NA                    NA\n14        Europe/Rome                NA                NA                    NA\n15        Europe/Rome                NA                NA                    NA\n16        Europe/Rome                NA                NA                    NA\n17        Europe/Rome                NA                NA                    NA\n18        Europe/Rome                NA                NA                    NA\n19        Europe/Rome                NA                NA                    NA\n20        Europe/Rome                NA                NA                    NA\n21        Europe/Rome                NA                NA                    NA\n22        Europe/Rome                NA                NA                    NA\n23        Europe/Rome                NA                NA                    NA\n24        Europe/Rome                NA                NA                    NA\n25        Europe/Rome                NA                NA                    NA\n26        Europe/Rome                NA                NA                    NA\n27        Europe/Rome                NA                NA                    NA\n28        Europe/Rome                NA                NA                    NA\n29        Europe/Rome                NA                NA                    NA\n30        Europe/Rome                NA                NA                    NA\n31        Europe/Rome                NA                NA                    NA\n32        Europe/Rome                NA                NA                    NA\n33        Europe/Rome                NA                NA                    NA\n34        Europe/Rome                NA                NA                    NA\n35        Europe/Rome                NA                NA                    NA\n36        Europe/Rome                NA                NA                    NA\n37        Europe/Rome                NA                NA                    NA\n38        Europe/Rome                NA                NA                    NA\n39        Europe/Rome                NA                NA                    NA\n40        Europe/Rome                NA                NA                    NA\n41        Europe/Rome                NA                NA                    NA\n42        Europe/Rome                NA                NA                    NA\n43        Europe/Rome                NA                NA                    NA\n44        Europe/Rome                NA                NA                    NA\n45        Europe/Rome                NA                NA                    NA\n46        Europe/Rome                NA                NA                    NA\n47        Europe/Rome                NA                NA                    NA\n48        Europe/Rome                NA                NA                    NA\n49        Europe/Rome                NA                NA                    NA\n50        Europe/Rome                NA                NA                    NA\n51        Europe/Rome                NA                NA                    NA\n52        Europe/Rome                NA                NA                    NA\n53        Europe/Rome                NA                NA                    NA\n54        Europe/Rome                NA                NA                    NA\n55        Europe/Rome                NA                NA                    NA\n56        Europe/Rome                NA                NA                    NA\n57        Europe/Rome                NA                NA                    NA\n58        Europe/Rome                NA                NA                    NA\n59        Europe/Rome                NA                NA                    NA\n60        Europe/Rome                NA                NA                    NA\n61        Europe/Rome                NA                NA                    NA\n62        Europe/Rome                NA                NA                    NA\n63        Europe/Rome                NA                NA                    NA\n64        Europe/Rome                NA                NA                    NA\n65        Europe/Rome                NA                NA                    NA\n66        Europe/Rome                NA                NA                    NA\n67        Europe/Rome                NA                NA                    NA\n68        Europe/Rome                NA                NA                    NA\n69        Europe/Rome                NA                NA                    NA\n70        Europe/Rome                NA                NA                    NA\n71        Europe/Rome                NA                NA                    NA\n72        Europe/Rome                NA                NA                    NA\n73        Europe/Rome                NA                NA                    NA\n74        Europe/Rome                NA                NA                    NA\n75        Europe/Rome                NA                NA                    NA\n76        Europe/Rome                NA                NA                    NA\n77        Europe/Rome                NA                NA                    NA\n78        Europe/Rome                NA                NA                    NA\n79        Europe/Rome                NA                NA                    NA\n80        Europe/Rome                NA                NA                    NA\n81        Europe/Rome                NA                NA                    NA\n82        Europe/Rome                NA                NA                    NA\n83        Europe/Rome                NA                NA                    NA\n84        Europe/Rome                NA                NA                    NA\n85        Europe/Rome                NA                NA                    NA\n86        Europe/Rome                NA                NA                    NA\n87        Europe/Rome                NA                NA                    NA\n88        Europe/Rome                NA                NA                    NA\n89        Europe/Rome                NA                NA                    NA\n90        Europe/Rome                NA                NA                    NA\n91        Europe/Rome                NA                NA                    NA\n92        Europe/Rome                NA                NA                    NA\n93        Europe/Rome                NA                NA                    NA\n94        Europe/Rome                NA                NA                    NA\n95        Europe/Rome                NA                NA                    NA\n96        Europe/Rome                NA                NA                    NA\n97        Europe/Rome                NA                NA                    NA\n98        Europe/Rome                NA                NA                    NA\n99        Europe/Rome                NA                NA                    NA\n100       Europe/Rome                NA                NA                    NA\n101       Europe/Rome                NA                NA                    NA\n102       Europe/Rome                NA                NA                    NA\n103       Europe/Rome                NA                NA                    NA\n104       Europe/Rome                NA                NA                    NA\n105       Europe/Rome                NA                NA                    NA\n106       Europe/Rome                NA                NA                    NA\n107       Europe/Rome                NA                NA                    NA\n108       Europe/Rome                NA                NA                    NA\n    properties.ugc_zone properties.county properties.sid properties.network\n1                    NA                NA           LIMG           IT__ASOS\n2                    NA                NA           LIEA           IT__ASOS\n3                    NA                NA           LIBA           IT__ASOS\n4                    NA                NA           LIPY           IT__ASOS\n5                    NA                NA           LIMW           IT__ASOS\n6                    NA                NA           LIQB           IT__ASOS\n7                    NA                NA           LIPA           IT__ASOS\n8                    NA                NA           LIYW           IT__ASOS\n9                    NA                NA           LIBD           IT__ASOS\n10                   NA                NA           LIME           IT__ASOS\n11                   NA                NA           LIPE           IT__ASOS\n12                   NA                NA           LIPB           IT__ASOS\n13                   NA                NA           LIPO           IT__ASOS\n14                   NA                NA           LIBR           IT__ASOS\n15                   NA                NA           LIEE           IT__ASOS\n16                   NA                NA           LIMN           IT__ASOS\n17                   NA                NA           LIEB           IT__ASOS\n18                   NA                NA           LIEC           IT__ASOS\n19                   NA                NA           LIMU           IT__ASOS\n20                   NA                NA           LIQC           IT__ASOS\n21                   NA                NA           LICC           IT__ASOS\n22                   NA                NA           LIPC           IT__ASOS\n23                   NA                NA           LIVC           IT__ASOS\n24                   NA                NA           LIMT           IT__ASOS\n25                   NA                NA           LIQJ           IT__ASOS\n26                   NA                NA           LICB           IT__ASOS\n27                   NA                NA           LICO           IT__ASOS\n28                   NA                NA           LIBC           IT__ASOS\n29                   NA                NA           LIMZ           IT__ASOS\n30                   NA                NA           LIED           IT__ASOS\n31                   NA                NA           LIVD           IT__ASOS\n32                   NA                NA           LICE           IT__ASOS\n33                   NA                NA           LIPF           IT__ASOS\n34                   NA                NA           LIRQ           IT__ASOS\n35                   NA                NA           LIBF           IT__ASOS\n36                   NA                NA           LIPK           IT__ASOS\n37                   NA                NA           LIVF           IT__ASOS\n38                   NA                NA           LIRH           IT__ASOS\n39                   NA                NA           LICL           IT__ASOS\n40                   NA                NA           LIMJ           IT__ASOS\n41                   NA                NA           LIPL           IT__ASOS\n42                   NA                NA           LIBV           IT__ASOS\n43                   NA                NA           LIMV           IT__ASOS\n44                   NA                NA           LIRM           IT__ASOS\n45                   NA                NA           LIRS           IT__ASOS\n46                   NA                NA           LIBG           IT__ASOS\n47                   NA                NA           LIRG           IT__ASOS\n48                   NA                NA           LICA           IT__ASOS\n49                   NA                NA           LICD           IT__ASOS\n50                   NA                NA           LIRL           IT__ASOS\n51                   NA                NA           LIBU           IT__ASOS\n52                   NA                NA           LIBN           IT__ASOS\n53                   NA                NA           LIMY           IT__ASOS\n54                   NA                NA           LIRJ           IT__ASOS\n55                   NA                NA           LIBH           IT__ASOS\n56                   NA                NA           LICF           IT__ASOS\n57                   NA                NA           LIML           IT__ASOS\n58                   NA                NA           LIMC           IT__ASOS\n59                   NA                NA           LIRX           IT__ASOS\n60                   NA                NA           LIBE           IT__ASOS\n61                   NA                NA           LIQO           IT__ASOS\n62                   NA                NA           LIRN           IT__ASOS\n63                   NA                NA           LIEO           IT__ASOS\n64                   NA                NA           LIPU           IT__ASOS\n65                   NA                NA           LIVP           IT__ASOS\n66                   NA                NA           LICJ           IT__ASOS\n67                   NA                NA           LICG           IT__ASOS\n68                   NA                NA           LIMP           IT__ASOS\n69                   NA                NA           LIRZ           IT__ASOS\n70                   NA                NA           LIBP           IT__ASOS\n71                   NA                NA           LIMS           IT__ASOS\n72                   NA                NA           LIMH           IT__ASOS\n73                   NA                NA           LIRP           IT__ASOS\n74                   NA                NA           LIVM           IT__ASOS\n75                   NA                NA           LIRE           IT__ASOS\n76                   NA                NA           LICR           IT__ASOS\n77                   NA                NA           LIVE           IT__ASOS\n78                   NA                NA           LIQN           IT__ASOS\n79                   NA                NA           LIPR           IT__ASOS\n80                   NA                NA           LIPI           IT__ASOS\n81                   NA                NA           LIVR           IT__ASOS\n82                   NA                NA           LIRF           IT__ASOS\n83                   NA                NA           LIRA           IT__ASOS\n84                   NA                NA           LIRU           IT__ASOS\n85                   NA                NA           LIPQ           IT__ASOS\n86                   NA                NA           LIRI           IT__ASOS\n87                   NA                NA           LIBY           IT__ASOS\n88                   NA                NA           LIQW           IT__ASOS\n89                   NA                NA           LIBQ           IT__ASOS\n90                   NA                NA           LICZ           IT__ASOS\n91                   NA                NA           EQYS           IT__ASOS\n92                   NA                NA           LIVO           IT__ASOS\n93                   NA                NA           LIRK           IT__ASOS\n94                   NA                NA           LIBT           IT__ASOS\n95                   NA                NA           LIMF           IT__ASOS\n96                   NA                NA           LIMK           IT__ASOS\n97                   NA                NA           LICT           IT__ASOS\n98                   NA                NA           LIRT           IT__ASOS\n99                   NA                NA           LIPH           IT__ASOS\n100                  NA                NA           LIPS           IT__ASOS\n101                  NA                NA           LIVT           IT__ASOS\n102                  NA                NA           LIMA           IT__ASOS\n103                  NA                NA           LIRY           IT__ASOS\n104                  NA                NA           LICU           IT__ASOS\n105                  NA                NA           LIPZ           IT__ASOS\n106                  NA                NA           LIRB           IT__ASOS\n107                  NA                NA           LIPX           IT__ASOS\n108                  NA                NA           LIRV           IT__ASOS\n    properties.online geometry.type geometry.coordinates\n1                TRUE         Point      8.1256, 44.0458\n2                TRUE         Point      8.2886, 40.6311\n3                TRUE         Point     15.7139, 41.5381\n4                TRUE         Point     13.3603, 43.6167\n5                TRUE         Point      7.3687, 45.7385\n6               FALSE         Point     11.8456, 43.4597\n7                TRUE         Point     12.6033, 46.0286\n8               FALSE         Point     12.5992, 46.0303\n9                TRUE         Point     16.7650, 41.1381\n10               TRUE         Point      9.7003, 45.6689\n11               TRUE         Point     11.2969, 44.5308\n12               TRUE         Point     11.3264, 46.4603\n13               TRUE         Point     10.3306, 45.4289\n14               TRUE         Point     17.9514, 40.6577\n15               TRUE         Point      9.0603, 39.2434\n16               TRUE         Point      8.6692, 45.5296\n17               TRUE         Point      9.7132, 39.9307\n18               TRUE         Point      9.5135, 39.1039\n19               TRUE         Point      8.1697, 43.9572\n20               TRUE         Point     14.2023, 40.5582\n21               TRUE         Point     15.0639, 37.4667\n22               TRUE         Point     12.2919, 44.2289\n23               TRUE         Point     10.7000, 44.1936\n24              FALSE         Point      9.9286, 44.4719\n25              FALSE         Point     11.8331, 42.0328\n26               TRUE         Point     14.6000, 36.9333\n27              FALSE         Point     15.1314, 36.6861\n28               TRUE         Point     17.0792, 38.9967\n29               TRUE         Point      7.6232, 44.5470\n30               TRUE         Point      8.9675, 39.3461\n31               TRUE         Point         12.22, 46.73\n32              FALSE         Point     14.2797, 37.5681\n33               TRUE         Point     11.6125, 44.8156\n34               TRUE         Point     11.2028, 43.8086\n35               TRUE         Point     15.5350, 41.4329\n36               TRUE         Point     12.0697, 44.1956\n37               TRUE         Point     12.7278, 43.5169\n38               TRUE         Point     13.2994, 41.6450\n39               TRUE         Point     14.2250, 37.0764\n40               TRUE         Point      8.8375, 44.4133\n41               TRUE         Point     10.2814, 45.4206\n42               TRUE         Point     16.9353, 40.7661\n43               TRUE         Point      8.9375, 44.5522\n44               TRUE         Point     14.0789, 41.0606\n45               TRUE         Point     11.0589, 42.7481\n46               TRUE         Point     17.3997, 40.5172\n47               TRUE         Point     12.7344, 41.9967\n48               TRUE         Point     16.2417, 38.9083\n49               TRUE         Point     12.6183, 35.4981\n50               TRUE         Point     12.9097, 41.5458\n51              FALSE         Point     16.0136, 40.0875\n52               TRUE         Point     18.1389, 40.2383\n53               TRUE         Point          7.80, 44.25\n54              FALSE         Point     10.2393, 42.7618\n55               TRUE         Point     16.8867, 40.4244\n56               TRUE         Point         15.55, 38.20\n57               TRUE         Point      9.2626, 45.4614\n58               TRUE         Point      8.7231, 45.6300\n59               TRUE         Point         10.38, 42.73\n60              FALSE         Point     15.9476, 41.7084\n61               TRUE         Point     11.1697, 42.3869\n62               TRUE         Point     14.2917, 40.8848\n63               TRUE         Point      9.5178, 40.8986\n64               TRUE         Point     11.8479, 45.3958\n65               TRUE         Point     11.0376, 46.1434\n66               TRUE         Point     13.0994, 38.1819\n67               TRUE         Point     11.9711, 36.8139\n68               TRUE         Point     10.2964, 44.8245\n69               TRUE         Point     12.5103, 43.0972\n70               TRUE         Point     14.1872, 42.4372\n71               TRUE         Point      9.7278, 44.9092\n72               TRUE         Point      7.7072, 45.9352\n73               TRUE         Point     10.3956, 43.6825\n74               TRUE         Point     12.2961, 44.4414\n75               TRUE         Point     12.4452, 41.6545\n76               TRUE         Point     15.6536, 38.0719\n77               TRUE         Point     10.5000, 46.8333\n78               TRUE         Point     12.8500, 42.4267\n79               TRUE         Point     12.6128, 44.0244\n80               TRUE         Point     13.0492, 45.9756\n81               TRUE         Point     11.7867, 46.2978\n82               TRUE         Point     12.2389, 41.8003\n83               TRUE         Point     12.5846, 41.8078\n84               TRUE         Point     12.4999, 41.9533\n85               TRUE         Point     13.4722, 45.8275\n86               TRUE         Point     14.9113, 40.6204\n87               TRUE         Point     18.3422, 39.8114\n88               TRUE         Point      9.9850, 44.0872\n89               TRUE         Point     16.3964, 39.3306\n90               TRUE         Point     14.9186, 37.4056\n91              FALSE         Point         14.92, 37.40\n92               TRUE         Point     13.5861, 46.5056\n93               TRUE         Point     12.9833, 42.4667\n94              FALSE         Point     14.9965, 42.0043\n95               TRUE         Point      7.6494, 45.2025\n96               TRUE         Point      7.7317, 45.0333\n97               TRUE         Point     12.4914, 37.9142\n98               TRUE         Point     15.2328, 41.0467\n99               TRUE         Point     12.1944, 45.6484\n100              TRUE         Point     12.1067, 45.6839\n101              TRUE         Point     13.7538, 45.6767\n102              TRUE         Point      7.6034, 45.0864\n103              TRUE         Point       12.277, 41.930\n104             FALSE         Point     13.1772, 38.7072\n105              TRUE         Point     12.3519, 45.5053\n106             FALSE         Point     12.2114, 42.0803\n107              TRUE         Point     10.8723, 45.3875\n108              TRUE         Point     12.0550, 42.4383\n\n$generation_time\n[1] \"2024-05-31T07:42:23Z\"\n\n$count\n[1] 108\n```\n\n\n:::\n:::\n\n\n------------------------------------------------------------------------\n\nQuick look at where all stations are located.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstationsPlot <- matrix(unlist(jdict$features$geometry$coordinates), nrow = 2 )\nplot(stationsPlot[1,], stationsPlot[2,], asp = 1)\n```\n\n::: {.cell-output-display}\n![](class_21_files/figure-revealjs/unnamed-chunk-7-1.png){width=960}\n:::\n:::\n\n\n------------------------------------------------------------------------\n\nNow that we have all the codes of the weather stations we can work on the URL address were all the specific information of each weather station is stored.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nservice <- \"https://mesonet.agron.iastate.edu/cgi-bin/request/asos.py?\"\nservice <- paste(service, \"data=all&tz=Etc/UTC&format=comma&latlon=yes&\", sep=\"\")\nservice <- paste(service, \"year1=\", year(date1), \"&month1=\", month(date1), \"&day1=\", mday(date1), \"&\", sep=\"\")\nservice <- paste(service, \"year2=\", year(date2), \"&month2=\", month(date2), \"&day2=\", mday(date2), \"&\", sep=\"\")\nservice\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"https://mesonet.agron.iastate.edu/cgi-bin/request/asos.py?data=all&tz=Etc/UTC&format=comma&latlon=yes&year1=1990&month1=1&day1=1&year2=2020&month2=12&day2=31&\"\n```\n\n\n:::\n\n```{.r .cell-code}\nit_stations_id <- jdict$features$id\nit_stations_id\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  [1] \"LIMG\" \"LIEA\" \"LIBA\" \"LIPY\" \"LIMW\" \"LIQB\" \"LIPA\" \"LIYW\" \"LIBD\" \"LIME\"\n [11] \"LIPE\" \"LIPB\" \"LIPO\" \"LIBR\" \"LIEE\" \"LIMN\" \"LIEB\" \"LIEC\" \"LIMU\" \"LIQC\"\n [21] \"LICC\" \"LIPC\" \"LIVC\" \"LIMT\" \"LIQJ\" \"LICB\" \"LICO\" \"LIBC\" \"LIMZ\" \"LIED\"\n [31] \"LIVD\" \"LICE\" \"LIPF\" \"LIRQ\" \"LIBF\" \"LIPK\" \"LIVF\" \"LIRH\" \"LICL\" \"LIMJ\"\n [41] \"LIPL\" \"LIBV\" \"LIMV\" \"LIRM\" \"LIRS\" \"LIBG\" \"LIRG\" \"LICA\" \"LICD\" \"LIRL\"\n [51] \"LIBU\" \"LIBN\" \"LIMY\" \"LIRJ\" \"LIBH\" \"LICF\" \"LIML\" \"LIMC\" \"LIRX\" \"LIBE\"\n [61] \"LIQO\" \"LIRN\" \"LIEO\" \"LIPU\" \"LIVP\" \"LICJ\" \"LICG\" \"LIMP\" \"LIRZ\" \"LIBP\"\n [71] \"LIMS\" \"LIMH\" \"LIRP\" \"LIVM\" \"LIRE\" \"LICR\" \"LIVE\" \"LIQN\" \"LIPR\" \"LIPI\"\n [81] \"LIVR\" \"LIRF\" \"LIRA\" \"LIRU\" \"LIPQ\" \"LIRI\" \"LIBY\" \"LIQW\" \"LIBQ\" \"LICZ\"\n [91] \"EQYS\" \"LIVO\" \"LIRK\" \"LIBT\" \"LIMF\" \"LIMK\" \"LICT\" \"LIRT\" \"LIPH\" \"LIPS\"\n[101] \"LIVT\" \"LIMA\" \"LIRY\" \"LICU\" \"LIPZ\" \"LIRB\" \"LIPX\" \"LIRV\"\n```\n\n\n:::\n:::\n\n\n. . .\n\nSet the working directory where to store data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsetwd(\"path/to/your/folder/of/choice\")\nit_stations_id <- jdict$features$id\n```\n:::\n\n\n------------------------------------------------------------------------\n\nThis is the main for loop to download the all the data.\n\n::: callout-important\n## Beware!!\n\nThe original loop downloads about 4.4GB of data! You should only run it when you have a stable and fast internet connection. Right now we will run a simplified version of the script that should download data from only the first two stations.\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nit_stations_nm <- jdict$features$properties$sname\n\nfor (i in 1:length(it_stations_id[1:2])){\n  uri <- paste(service, \"station=\", it_stations_id[i], sep = \"\")\n  print(paste(\"Network:\", network, \n              \"Downloading:\", it_stations_nm[i], it_stations_id[i], sep=\" \"))\n  data <- url(uri)\n  datestring1 <- format(date1, \"%Y%m%d\")\n  datestring2 <- format(date2, \"%Y%m%d\")\n  outfn <- paste(network, \"_\", it_stations_id[i], \"_\", datestring1, \"_to_\", datestring2, sep=\"\")\n  download.file(uri, paste(outfn, \".csv\"), \"auto\")\n}\n```\n:::\n\n\nWhen the download start you should see a message on the prompt telling you what station the script is downloading.\n\n## \n\n![This is what my result folder looks like. Note, I have downloaded all 4.4GB of data, but you should only have two files corresponding to \"LIMG\" and \"LIEA\".](./class_21_1.png)\n\nTime to load the data and look at them.\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# path_to_csv <- \"path/to/your/data\"\nsuffix <- c(\"LIEA\", \"LIMG\")\nfiles <- list.files(path = path_to_csv, pattern = \"*.csv\", full.names = T) \nfiles_names <- list.files(path = path_to_csv, pattern = \"*.csv\", full.names = F)\nmyfiles  <-  lapply(files, read.csv, skip = 5, header = T, na.strings = \"M\")\nnames(myfiles) <- suffix\n\nmyfiles[[1]][1:5,]\n```\n:::\n\n\n------------------------------------------------------------------------\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmyfiles_df <- bind_rows(myfiles, .id = \"station_label\")\nformat <- \"%Y-%m-%d %H:%M\"\nmyfiles_df$valid <- as.POSIXct(myfiles_df$valid, format = format, tz = \"UTC\")\nhead(myfiles_df)\n```\n:::\n\n\n------------------------------------------------------------------------\n\n\n::: {.cell}\n\n```{.r .cell-code}\npar(mfrow = c(2,1))\n\nplot(date(myfiles_df[myfiles_df$station == \"LIEA\", ]$valid),\n     myfiles_df[myfiles_df$station == \"LIEA\", ]$tmpf, type = \"o\", \n     xlab = \"Year\", ylab = \"Temp.\")\nplot(date(myfiles_df[myfiles_df$station == \"LIMG\", ]$valid),\n     myfiles_df[myfiles_df$station == \"LIMG\", ]$tmpf, type = \"o\", \n     xlab = \"Year\", ylab = \"Temp.\")\n```\n:::\n",
    "supporting": [
      "class_21_files/figure-revealjs"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}